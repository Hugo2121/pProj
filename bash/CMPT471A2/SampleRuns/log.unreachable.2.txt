Thu Oct 23 16:04:50 PDT 2014
 This script captures ICMP destination unreachable messages for a target host.
 The user is prompted to enter the target host, then the eth1 interface of the target host is turned off.
 Target is pinged and the ICMP message is captured using tcpdump.
 The captured message is saved in a file "unreachable.cap" and displayed using tcpdump command.
 It is also possible to open and view the .cap file in wireshark, if so desired.
 A log file of the execuriton of this script is saved in "log.unreachable.txt" and can be viewed at a later date.
 Please enter a target host from the follwoing list: 
april
june
september
summer
fall
equinox
august
november
autumn
may
july
winter
october
solstice
year
->


 You are currently running the script "unreachable.sh" on "spring" with admin IP address: "192.168.0.20"
 "spring" belongs to subnetwork "net17" with IP address: "172.17.1.20"

 The target you chose is "august" with admin IP address: "192.168.0.8"
 "august" belongs to subnetowrk "net17" with IP address: "172.17.1.8"

 Turning off eth1 NIC on "august" ....
 Process complete... 

eth0      Link encap:Ethernet  HWaddr 00:50:56:a4:1d:77  
          inet addr:192.168.0.8  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::250:56ff:fea4:1d77/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:355649 errors:0 dropped:0 overruns:0 frame:0
          TX packets:559439 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:39795716 (37.9 MB)  TX bytes:125101576 (119.3 MB)
          Interrupt:16 Base address:0x2024 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:19700 errors:0 dropped:0 overruns:0 frame:0
          TX packets:19700 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:1909248 (1.8 MB)  TX bytes:1909248 (1.8 MB)


 Starting the sequence to capture ICMP UNREACHABLE message.... 

 Process complete... 

 Restoring eth1 NIC on "august" .... 
 Process complete... 
eth0      Link encap:Ethernet  HWaddr 00:50:56:a4:1d:77  
          inet addr:192.168.0.8  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::250:56ff:fea4:1d77/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:356237 errors:0 dropped:0 overruns:0 frame:0
          TX packets:560275 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:39904896 (38.0 MB)  TX bytes:125174812 (119.3 MB)
          Interrupt:16 Base address:0x2024 

eth1      Link encap:Ethernet  HWaddr 00:50:56:a4:05:33  
          inet addr:172.17.1.8  Bcast:172.17.255.255  Mask:255.255.0.0
          inet6 addr: fe80::250:56ff:fea4:533/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:73671 errors:0 dropped:0 overruns:0 frame:0
          TX packets:15824 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:15015152 (14.3 MB)  TX bytes:3738092 (3.5 MB)
          Interrupt:17 Base address:0x20a4 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:19700 errors:0 dropped:0 overruns:0 frame:0
          TX packets:19700 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:1909248 (1.8 MB)  TX bytes:1909248 (1.8 MB)


 Displaying the captured message(s): 

16:06:06.031565 IP (tos 0xc0, ttl 64, id 14562, offset 0, flags [none], proto ICMP (1), length 576) spring.net17 > spring.net17: ICMP host august.net17 unreachable, length 556
	IP (tos 0x0, ttl 8, id 0, offset 0, flags [DF], proto UDP (17), length 1500) spring.net17.47455 > august.net17.44467: UDP, length 1472
	0x0000:  0000 0304 0006 0000 0000 0000 0000 0800  ................
	0x0010:  45c0 0240 38e2 0000 4001 e4d0 ac11 0114  E..@8...@.......
	0x0020:  ac11 0114 0301 b0c1 0000 0000 4500 05dc  ............E...
	0x0030:  0000 4000 0811 12d3 ac11 0114 ac11 0108  ..@.............
	0x0040:  b95f adb3 05c8 6018 0800 0000 dc89 4954  ._....`.......IT
	0x0050:  516b 0000 0000 0000 0000 0000 0000 0000  Qk..............
	0x0060:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0070:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0080:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0090:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0100:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0110:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0120:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0130:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0140:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0150:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0160:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0170:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0180:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0190:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0200:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0210:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0220:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0230:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0240:  0000 0000 0000 0000 0000 0000 0000 0000  ................
16:06:06.031580 IP (tos 0xc0, ttl 64, id 14563, offset 0, flags [none], proto ICMP (1), length 576) spring.net17 > spring.net17: ICMP host august.net17 unreachable, length 556
	IP (tos 0x0, ttl 8, id 0, offset 0, flags [DF], proto UDP (17), length 1500) spring.net17.47455 > august.net17.44468: UDP, length 1472
	0x0000:  0000 0304 0006 0000 0000 0000 0000 0800  ................
	0x0010:  45c0 0240 38e3 0000 4001 e4cf ac11 0114  E..@8...@.......
	0x0020:  ac11 0114 0301 74c0 0000 0000 4500 05dc  ......t.....E...
	0x0030:  0000 4000 0811 12d3 ac11 0114 ac11 0108  ..@.............
	0x0040:  b95f adb4 05c8 6018 0800 0000 dd89 4954  ._....`.......IT
	0x0050:  8c6b 0000 0000 0000 0000 0000 0000 0000  .k..............
	0x0060:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0070:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0080:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0090:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0100:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0110:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0120:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0130:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0140:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0150:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0160:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0170:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0180:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0190:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0200:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0210:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0220:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0230:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0240:  0000 0000 0000 0000 0000 0000 0000 0000  ................
16:06:06.031583 IP (tos 0xc0, ttl 64, id 14564, offset 0, flags [none], proto ICMP (1), length 576) spring.net17 > spring.net17: ICMP host august.net17 unreachable, length 556
	IP (tos 0x0, ttl 9, id 0, offset 0, flags [DF], proto UDP (17), length 1500) spring.net17.47455 > august.net17.44469: UDP, length 1472
	0x0000:  0000 0304 0006 0000 0000 0000 0000 0800  ................
	0x0010:  45c0 0240 38e4 0000 4001 e4ce ac11 0114  E..@8...@.......
	0x0020:  ac11 0114 0301 9abf 0000 0000 4500 05dc  ............E...
	0x0030:  0000 4000 0911 11d3 ac11 0114 ac11 0108  ..@.............
	0x0040:  b95f adb5 05c8 6018 0900 0000 de89 4954  ._....`.......IT
	0x0050:  646b 0000 0000 0000 0000 0000 0000 0000  dk..............
	0x0060:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0070:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0080:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0090:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0100:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0110:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0120:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0130:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0140:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0150:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0160:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0170:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0180:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0190:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0200:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0210:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0220:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0230:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0240:  0000 0000 0000 0000 0000 0000 0000 0000  ................
