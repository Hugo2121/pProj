Fri Oct 24 15:24:22 PDT 2014
 This script captures an IPv6 datagram from host A in net17 (or net18) to host B in net18 (or net17) which is generated by tracepath6 HOST_B command
 An auxillary script "ipV4.encapsulation.sh" captures the 6to4 encapsulation of the datagram going through the IPv4 tunnel in net16 (or net19).
 tcpdump is used to capture and display the datagrams, which are stored in files "encapsulation.cap" and "ipV4.encapsulation.cap" and can be viewed at a later time using tcpdump command or in Wireshark.
 A log of the script is kept in "log.encapsulation.txt" and can be viewed at a later date.
 The script uses an "INTERMEDIATE_NODE" entered by the user to run the auxillary script.

 Please select a target node from the follwoing list: 
may
july
winter
->


 Please select an intermediate node from the following list: 
april
june
september
summer
fall
equinox
->


 Initialization in progress. Please stand by....

 Initialization complete. 

 You are running "encapsulation.sh" on "spring" with "admin" IP address: "192.168.0.20" on subnet "net17" with subnet IP address: "172.17.1.20"
 You chose the target "july" with "admin" IP address: "192.168.0.7" on subnet "net18" with subnet IP address: "172.18.1.7"
 You chose the intermediate node "fall" with "admin" IP address: "192.168.0.14" on subnet "net16" with subnet IP address: "172.16.1.14"

 Running tcpdump on "fall"..... 
 Process complete. 

eth0      Link encap:Ethernet  HWaddr 00:50:56:a4:3a:91  
          inet addr:192.168.0.7  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::250:56ff:fea4:3a91/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:199177 errors:0 dropped:0 overruns:0 frame:0
          TX packets:183149 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:24434306 (23.3 MB)  TX bytes:40550186 (38.6 MB)
          Interrupt:16 Base address:0x2024 

eth1      Link encap:Ethernet  HWaddr 00:50:56:a4:6b:cd  
          inet addr:172.18.1.7  Bcast:172.18.255.255  Mask:255.255.0.0
          inet6 addr: fdd0:8184:d967:118:250:56ff:fea4:6bcd/64 Scope:Global
          inet6 addr: 2002:ac10:10c:118:250:56ff:fea4:6bcd/64 Scope:Global
          inet6 addr: fdd0:8184:d967:218:250:56ff:fea4:6bcd/64 Scope:Global
          inet6 addr: 2002:ac13:103:218:250:56ff:fea4:6bcd/64 Scope:Global
          inet6 addr: fe80::250:56ff:fea4:6bcd/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:85027 errors:0 dropped:0 overruns:0 frame:0
          TX packets:17088 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:10869198 (10.3 MB)  TX bytes:3765993 (3.5 MB)
          Interrupt:17 Base address:0x20a4 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:34669 errors:0 dropped:0 overruns:0 frame:0
          TX packets:34669 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:24459304 (23.3 MB)  TX bytes:24459304 (23.3 MB)

 Please enter "july" IPv6 address. You can copy-paste from the above information here: 


 Running tcpdump locally.... 
 Process complete. 

 Testing tracepath6 reachability of "july" with IPv6 address:"2002:ac10:10c:118:250:56ff:fea4:6bcd"

 1?: [LOCALHOST]                      pmtu 1500
 1:  2002:ac10:101:117::1                       5.782ms 
 1:  2002:ac10:101:117::1                       0.916ms 
 2:  2002:ac10:101:117::1                       0.309ms pmtu 1480
 2:  2002:ac10:10c::1                           0.587ms 
 2:  2002:ac10:10c::1                           0.786ms 
 3:  2002:ac10:10c:118:250:56ff:fea4:6bcd       3.590ms reached
     Resume: pmtu 1480 hops 3 back 62 

 IPv6 datagram captured message: 
15:26:07.768030 IP6 (hlim 64, next-header ICMPv6 (58) payload length: 64) 2002:ac10:101:117:250:56ff:fea4:44c5 > 2002:ac10:10c:118:250:56ff:fea4:2fa3: [icmp6 sum ok] ICMP6, echo request, length 64, seq 27
	0x0000:  0004 0001 0006 0050 56a4 44c5 0000 86dd  .......PV.D.....
	0x0010:  6000 0000 0040 3a40 2002 ac10 0101 0117  `....@:@........
	0x0020:  0250 56ff fea4 44c5 2002 ac10 010c 0118  .PV...D.........
	0x0030:  0250 56ff fea4 2fa3 8000 a96b f06a 001b  .PV.../....k.j..
	0x0040:  ffd1 4a54 e4b7 0b00 0809 0a0b 0c0d 0e0f  ..JT............
	0x0050:  1011 1213 1415 1617 1819 1a1b 1c1d 1e1f  ................
	0x0060:  2021 2223 2425 2627 2829 2a2b 2c2d 2e2f  .!"#$%&'()*+,-./
	0x0070:  3031 3233 3435 3637                      01234567
15:26:07.769355 IP6 (hlim 62, next-header ICMPv6 (58) payload length: 64) 2002:ac10:10c:118:250:56ff:fea4:2fa3 > 2002:ac10:101:117:250:56ff:fea4:44c5: [icmp6 sum ok] ICMP6, echo reply, length 64, seq 27
	0x0000:  0000 0001 0006 0050 56a4 0bbb 0000 86dd  .......PV.......
	0x0010:  6000 0000 0040 3a3e 2002 ac10 010c 0118  `....@:>........
	0x0020:  0250 56ff fea4 2fa3 2002 ac10 0101 0117  .PV.../.........
	0x0030:  0250 56ff fea4 44c5 8100 a86b f06a 001b  .PV...D....k.j..
	0x0040:  ffd1 4a54 e4b7 0b00 0809 0a0b 0c0d 0e0f  ..JT............
	0x0050:  1011 1213 1415 1617 1819 1a1b 1c1d 1e1f  ................
	0x0060:  2021 2223 2425 2627 2829 2a2b 2c2d 2e2f  .!"#$%&'()*+,-./
	0x0070:  3031 3233 3435 3637                      01234567
15:26:08.767424 IP6 (hlim 64, next-header ICMPv6 (58) payload length: 64) 2002:ac10:101:117:250:56ff:fea4:44c5 > 2002:ac10:10c:118:250:56ff:fea4:2fa3: [icmp6 sum ok] ICMP6, echo request, length 64, seq 28
	0x0000:  0004 0001 0006 0050 56a4 44c5 0000 86dd  .......PV.D.....
	0x0010:  6000 0000 0040 3a40 2002 ac10 0101 0117  `....@:@........
	0x0020:  0250 56ff fea4 44c5 2002 ac10 010c 0118  .PV...D.........
	0x0030:  0250 56ff fea4 2fa3 8000 f16c f06a 001c  .PV.../....l.j..
	0x0040:  00d2 4a54 9bb5 0b00 0809 0a0b 0c0d 0e0f  ..JT............
	0x0050:  1011 1213 1415 1617 1819 1a1b 1c1d 1e1f  ................
	0x0060:  2021 2223 2425 2627 2829 2a2b 2c2d 2e2f  .!"#$%&'()*+,-./
	0x0070:  3031 3233 3435 3637                      01234567
15:26:08.768610 IP6 (hlim 62, next-header ICMPv6 (58) payload length: 64) 2002:ac10:10c:118:250:56ff:fea4:2fa3 > 2002:ac10:101:117:250:56ff:fea4:44c5: [icmp6 sum ok] ICMP6, echo reply, length 64, seq 28
	0x0000:  0000 0001 0006 0050 56a4 0bbb 0000 86dd  .......PV.......
	0x0010:  6000 0000 0040 3a3e 2002 ac10 010c 0118  `....@:>........
	0x0020:  0250 56ff fea4 2fa3 2002 ac10 0101 0117  .PV.../.........
	0x0030:  0250 56ff fea4 44c5 8100 f06c f06a 001c  .PV...D....l.j..
	0x0040:  00d2 4a54 9bb5 0b00 0809 0a0b 0c0d 0e0f  ..JT............
	0x0050:  1011 1213 1415 1617 1819 1a1b 1c1d 1e1f  ................
	0x0060:  2021 2223 2425 2627 2829 2a2b 2c2d 2e2f  .!"#$%&'()*+,-./
	0x0070:  3031 3233 3435 3637                      01234567
15:26:09.317623 IP6 (hlim 1, next-header UDP (17) payload length: 1460) 2002:ac10:101:117:250:56ff:fea4:44c5.45272 > 2002:ac10:10c:118:250:56ff:fea4:6bcd.60208: [udp sum ok] UDP, length 1452
	0x0000:  0004 0001 0006 0050 56a4 44c5 0000 86dd  .......PV.D.....
	0x0010:  6000 0000 05b4 1101 2002 ac10 0101 0117  `...............
	0x0020:  0250 56ff fea4 44c5 2002 ac10 010c 0118  .PV...D.........
	0x0030:  0250 56ff fea4 6bcd b0d8 eb30 05b4 5da1  .PV...k....0..].
	0x0040:  0100 0000 01d2 4a54 acd8 0400 0000 0000  ......JT........
	0x0050:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0060:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0070:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0080:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0090:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x00f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0100:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0110:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0120:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0130:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0140:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0150:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0160:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0170:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0180:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0190:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x01f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0200:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0210:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0220:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0230:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0240:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0250:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0260:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0270:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0280:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0290:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x02a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x02b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x02c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x02d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x02e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x02f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0300:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0310:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0320:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0330:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0340:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0350:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0360:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0370:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0380:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0390:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x03a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x03b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x03c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x03d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x03e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x03f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0400:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0410:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0420:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0430:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0440:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0450:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0460:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0470:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0480:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0490:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x04a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x04b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x04c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x04d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x04e0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x04f0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0500:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0510:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0520:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0530:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0540:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0550:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0560:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0570:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0580:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x0590:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x05a0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x05b0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x05c0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x05d0:  0000 0000 0000 0000 0000 0000 0000 0000  ................
	0x05e0:  0000 0000 0000 0000 0000 0000            ............

 Copying the 6to4 IPv4 encapsulated message from "fall/HOME/ffakhrae/" 
 Process complete. 

 6to4 IPv4 encapsulated datagram captured message: 
15:25:44.785822 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto IPv6 (41), length 124) january.net16 > december.net16: IP6 (hlim 63, next-header ICMPv6 (58) payload length: 64) 2002:ac10:101:117:250:56ff:fea4:44c5 > 2002:ac10:10c:118:250:56ff:fea4:2fa3: [icmp6 sum ok] ICMP6, echo request, length 64, seq 4
	0x0000:  0050 56a4 77a7 0050 56a4 728f 0800 4500  .PV.w..PV.r...E.
	0x0010:  007c 0000 4000 4029 e02b ac10 0101 ac10  .|..@.@).+......
	0x0020:  010c 6000 0000 0040 3a3f 2002 ac10 0101  ..`....@:?......
	0x0030:  0117 0250 56ff fea4 44c5 2002 ac10 010c  ...PV...D.......
	0x0040:  0118 0250 56ff fea4 2fa3 8000 5ca0 f06a  ...PV.../...\..j
	0x0050:  0004 e8d1 4a54 489a 0b00 0809 0a0b 0c0d  ....JTH.........
	0x0060:  0e0f 1011 1213 1415 1617 1819 1a1b 1c1d  ................
	0x0070:  1e1f 2021 2223 2425 2627 2829 2a2b 2c2d  ...!"#$%&'()*+,-
	0x0080:  2e2f 3031 3233 3435 3637                 ./01234567
15:25:44.788404 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto IPv6 (41), length 124) december.net16 > january.net16: IP6 (hlim 63, next-header ICMPv6 (58) payload length: 64) 2002:ac10:10c:118:250:56ff:fea4:2fa3 > 2002:ac10:101:117:250:56ff:fea4:44c5: [icmp6 sum ok] ICMP6, echo reply, length 64, seq 4
	0x0000:  0050 56a4 728f 0050 56a4 77a7 0800 4500  .PV.r..PV.w...E.
	0x0010:  007c 0000 4000 4029 e02b ac10 010c ac10  .|..@.@).+......
	0x0020:  0101 6000 0000 0040 3a3f 2002 ac10 010c  ..`....@:?......
	0x0030:  0118 0250 56ff fea4 2fa3 2002 ac10 0101  ...PV.../.......
	0x0040:  0117 0250 56ff fea4 44c5 8100 5ba0 f06a  ...PV...D...[..j
	0x0050:  0004 e8d1 4a54 489a 0b00 0809 0a0b 0c0d  ....JTH.........
	0x0060:  0e0f 1011 1213 1415 1617 1819 1a1b 1c1d  ................
	0x0070:  1e1f 2021 2223 2425 2627 2829 2a2b 2c2d  ...!"#$%&'()*+,-
	0x0080:  2e2f 3031 3233 3435 3637                 ./01234567
15:25:45.785783 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto IPv6 (41), length 124) january.net16 > december.net16: IP6 (hlim 63, next-header ICMPv6 (58) payload length: 64) 2002:ac10:101:117:250:56ff:fea4:44c5 > 2002:ac10:10c:118:250:56ff:fea4:2fa3: [icmp6 sum ok] ICMP6, echo request, length 64, seq 5
	0x0000:  0050 56a4 77a7 0050 56a4 728f 0800 4500  .PV.w..PV.r...E.
	0x0010:  007c 0000 4000 4029 e02b ac10 0101 ac10  .|..@.@).+......
	0x0020:  010c 6000 0000 0040 3a3f 2002 ac10 0101  ..`....@:?......
	0x0030:  0117 0250 56ff fea4 44c5 2002 ac10 010c  ...PV...D.......
	0x0040:  0118 0250 56ff fea4 2fa3 8000 549f f06a  ...PV.../...T..j
	0x0050:  0005 e9d1 4a54 4f9a 0b00 0809 0a0b 0c0d  ....JTO.........
	0x0060:  0e0f 1011 1213 1415 1617 1819 1a1b 1c1d  ................
	0x0070:  1e1f 2021 2223 2425 2627 2829 2a2b 2c2d  ...!"#$%&'()*+,-
	0x0080:  2e2f 3031 3233 3435 3637                 ./01234567
